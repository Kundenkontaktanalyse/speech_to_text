import java.io.File;
import java.io.IOException;

/*
 * This Java source file was generated by the Gradle 'init' task.
 */

/*
 * XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
 * X Ablauf beim Auswählen:   1. ffmpeg.exe														X
 * X						  2. JsonInput 														X	
 * X						  3. Callcenter-Spur												X
 * X						  4. Kunden-Spur													X
 * X																							X
 * XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
 */

// Klasse zum Verwalten der Files im Verzeichnis und Aufrufen der Übersetzung ermittelter Json-Agent-Kunde Tripels

public class SpeechToText {
	private String translator;
	
	public SpeechToText(String translator){
		this.translator = translator;
	}

	public void invokeTranslation(String outputDestination, File jsonInput, File caInput, File kunInput,
			File gespraechsOrdner, File temp, File localFfmpegFile) throws IOException {

		
		
		System.out.println("invokeTranslation");

		String idName = gespraechsOrdner.getName();
		TextBundler myBundler = new TextBundler(idName);

		// FileChooser myChooser = new FileChooser();

		// Ort der ffmpegEXE und der beiden Audio Channels
		String jsonInputPath = jsonInput.toString();
		String ffmpegExeOrdner = localFfmpegFile.getParent();

		// myChooser.choose();
		// ----------------------------------------------------------------

		manageJavaInput MyManage = new manageJavaInput();
		MyManage.manage(temp.toString(), ffmpegExeOrdner, caInput, kunInput, idName);

		// ----------------------------------------------------------------

		SpeakerSeperation spsep = new SpeakerSeperation(gespraechsOrdner, temp, idName, myBundler, translator);
		spsep.processFiles();
		// spsep.initalizeData();

		myBundler.setAudioLength(spsep.getAudioLength());
		myBundler.adaptSnippetlist();
		myBundler.speichereDialoginTXT(outputDestination, idName);
		myBundler.generiereJSON(idName, outputDestination, jsonInputPath);
		myBundler.reSetInitialsBundler();

	}
}